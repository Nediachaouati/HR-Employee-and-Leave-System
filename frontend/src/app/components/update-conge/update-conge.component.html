<div class="container-fluid mt-4 px-3">
    <!-- Success Message Alert -->
    <div *ngIf="successMessage" class="alert alert-success alert-dismissible fade show mx-auto max-w-2xl" role="alert">
        <span>{{ successMessage }}</span>
        <button type="button" class="btn-close" (click)="successMessage = null" aria-label="Close"></button>
    </div>
    <!-- Error Message Alert -->
    <div *ngIf="errorMessage" class="alert alert-danger alert-dismissible fade show mx-auto max-w-2xl" role="alert">
        <span>{{ errorMessage }}</span>
        <button type="button" class="btn-close" (click)="errorMessage = null" aria-label="Close"></button>
    </div>

    <h2 class="text-xl font-bold text-gray-900 mb-4">Update Leave Request</h2>

    <div class="card shadow-md rounded-lg p-4 bg-white max-w-2xl mx-auto">
        <form (ngSubmit)="onSubmit()" #congeForm="ngForm">
            <div class="mb-3">
                <label for="start_date" class="form-label">Start Date</label>
                <input 
                    type="date" 
                    class="form-control" 
                    id="start_date" 
                    [(ngModel)]="leaveRequest.start_date" 
                    name="start_date"
                    required
                    [ngClass]="{'is-invalid': congeForm.submitted && !leaveRequest.start_date}"
                >
                <div *ngIf="congeForm.submitted && !leaveRequest.start_date" class="invalid-feedback">
                    Start date is required.
                </div>
            </div>

            <div class="mb-3">
                <label for="end_date" class="form-label">End Date</label>
                <input 
                    type="date" 
                    class="form-control" 
                    id="end_date" 
                    [(ngModel)]="leaveRequest.end_date" 
                    name="end_date"
                    required
                    [ngClass]="{'is-invalid': congeForm.submitted && !leaveRequest.end_date}"
                >
                <div *ngIf="congeForm.submitted && !leaveRequest.end_date" class="invalid-feedback">
                    End date is required.
                </div>
            </div>

            <div class="mb-3">
                <label for="type" class="form-label">Type</label>
                <select 
                    class="form-control" 
                    id="type" 
                    [(ngModel)]="leaveRequest.type" 
                    name="type"
                    required
                    [ngClass]="{'is-invalid': congeForm.submitted && !leaveRequest.type}"
                >
                    <option value="">Select Type</option>
                    <option *ngFor="let type of typeOptions" [value]="type">{{ type }}</option>
                </select>
                <div *ngIf="congeForm.submitted && !leaveRequest.type" class="invalid-feedback">
                    Type is required.
                </div>
            </div>

            <div class="mb-3">
                <label for="comments" class="form-label">Comments</label>
                <textarea 
                    class="form-control" 
                    id="comments" 
                    rows="4"
                    [(ngModel)]="leaveRequest.comments" 
                    name="comments"
                ></textarea>
            </div>

            <div class="flex justify-end space-x-2">
                <button 
                    type="button" 
                    class="btn btn-secondary" 
                    (click)="cancel()"
                >
                    Cancel
                </button>
                <button 
                    type="submit" 
                    class="btn btn-primary"
                >
                    Update
                </button>
            </div>
        </form>
    </div>
</div>

<style>
.container-fluid {
    font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
}
.card {
    border: 1px solid #e5e7eb;
    border-radius: 8px;
}
.form-label {
    font-weight: 500;
    color: #374151;
    font-size: 0.875rem;
}
.form-control {
    border: 1px solid #ced4da;
    border-radius: 4px;
    padding: 0.5rem 0.75rem;
    font-size: 0.875rem;
    line-height: 1.5;
    width: 100%;
}
.form-control:focus {
    border-color: #4f46e5;
    box-shadow: 0 0 0 0.2rem rgba(79, 70, 229, 0.25);
    outline: 0;
}
.is-invalid {
    border-color: #dc3545;
}
.invalid-feedback {
    color: #dc3545;
    font-size: 0.75rem;
}
.btn-primary {
    background-color: #4f46e5;
    border-color: #4f46e5;
    color: #ffffff;
    padding: 0.5rem 1rem;
    font-size: 0.875rem;
    border-radius: 4px;
}
.btn-primary:hover {
    background-color: #4338ca;
    border-color: #4338ca;
}
.btn-secondary {
    background-color: #6c757d;
    border-color: #6c757d;
    color: #ffffff;
    padding: 0.5rem 1rem;
    font-size: 0.875rem;
    border-radius: 4px;
}
.btn-secondary:hover {
    background-color: #5c636a;
    border-color: #565e64;
}
.alert-success {
    background-color: #d1e7dd;
    border-color: #badbcc;
    color: #0f5132;
}
.alert-danger {
    background-color: #f8d7da;
    border-color: #f5c2c7;
    color: #842029;
}
.alert-dismissible {
    padding-right: 3rem;
}
.btn-close {
    background: transparent url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16' fill='%23000000'%3e%3cpath d='M.293.293a1 1 0 011.414 0L8 6.586 14.293.293a1 1 0 111.414 1.414L9.414 8l6.293 6.293a1 1 0 01-1.414 1.414L8 9.414l-6.293 6.293a1 1 0 01-1.414-1.414L6.586 8 .293 1.707A1 1 0 01.293.293z'/%3e%3c/svg%3e") center/1em auto no-repeat;
}
.text-gray-900 {
    color: #111827;
}
.rounded-lg {
    border-radius: 8px;
}
.shadow-md {
    box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
}
.flex {
    display: flex;
}
.justify-end {
    justify-content: flex-end;
}
.space-x-2 > * + * {
    margin-left: 0.5rem;
}
.mb-3 {
    margin-bottom: 0.75rem;
}
.mb-4 {
    margin-bottom: 1rem;
}
.mx-auto {
    margin-left: auto;
    margin-right: auto;
}
.max-w-2xl {
    max-width: 42rem;
}
</style>